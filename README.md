# ZK SNARK  

This provides an overview of a custom zero-knowledge circuit implemented using the Circom language. The circuit, named `CustomCircuit`, demonstrates the creation of logic gates and their connections to create a custom computation. The resulting circuit can be used to generate zero-knowledge proofs for certain computations while keeping the input values private.

## Circuit Overview

The `CustomCircuit` demonstrates the use of logic gates to compute an output signal based on input signals. The circuit involves the following components:

![Circuit Diagram](https://authoring.metacrafters.io/assets/cms/Assessment_b05f6ed658.png?updated_at=2023-02-24T00:00:37.278Z)


- **Inputs**: The circuit takes two input signals, `A` and `B`, which serve as operands for the computation.
- **Gates**: The circuit uses three logic gates: `AND`, `NOT`, and `OR`. These gates are defined as separate templates.
- **Intermediate Signals**: The circuit has two intermediate signals, `X` and `Y`, which are the outputs of the `AND` and `NOT` gates, respectively.
- **Output**: The final output signal, `Q`, is computed using the `OR` gate with inputs from the intermediate signals.
## Quick Start
Compile the CustomCircuit() circuit and verify it against a smart contract verifier

```
pragma circom 2.0.0;

/*This circuit template checks that c is the multiplication of a and b.*/  

template CustomCircuit () {  

   // Declaration of signals.  
   signal input a;  
   signal input b;  
   signal output c;  

   // Constraints.  
   c <== a * b;  
}
component main = CustomCircuit();
```
### Install
`npm i`

### Compile
`npx hardhat circom` 
This will generate the **out** file with circuit intermediaries and geneate the **CustomCircuitVerifier.sol** contract

### Generate a proof and deploy a verifier contract using the provided script:
   Deploying on Local Hardhat Network
   ```
   npx hardhat run scripts/deploy.ts
   ```
   Deploying on Amoy Test Network
   ```
   npx hardhat run scripts/deploy.ts --network amoy
   ```
   This script performs the following tasks:
   - Deploys the verifier contract.
   - Generates a proof using circuit intermediaries.
   - Generates calldata for verification.
   - Calls `verifyProof()` on the verifier contract with calldata for proof verification.


With two commands you can compile a ZKP, generate a proof, deploy a verifier, and verify the proof ðŸŽ‰

## Configuration
### Directory Structure
**circuits**
```
â”œâ”€â”€ CustomCircuit
â”‚   â”œâ”€â”€ circuit.circom
â”‚   â”œâ”€â”€ input.json
â”‚   â””â”€â”€ out
â”‚       â”œâ”€â”€ circuit.wasm
â”‚       â”œâ”€â”€ CustomCircuit.r1cs
â”‚       â”œâ”€â”€ CustomCircuit.vkey
â”‚       â””â”€â”€ CustomCircuit.zkey
â”œâ”€â”€ new-circuit
â””â”€â”€ powersOfTau28_hez_final_12.ptau
```
Each new circuit lives in it's own directory. At the top level of each circuit directory lives the circom circuit and input to the circuit.
The **out** directory will be autogenerated and store the compiled outputs, keys, and proofs. The Powers of Tau file comes from the Polygon Hermez ceremony, which saves time by not needing a new ceremony. 


**contracts**
```
contracts
â””â”€â”€ CustomCircuitVerifier.sol
```
Verifier contracts are autogenerated and prefixed by the circuit name, in this example **CustomCircuit**

## hardhat.config.ts
```
  circom: {
    // (optional) Base path for input files, defaults to `./circuits/`
    inputBasePath: "./circuits",
    // (required) The final ptau file, relative to inputBasePath, from a Phase 1 ceremony
    ptau: "powersOfTau28_hez_final_12.ptau",
    // (required) Each object in this array refers to a separate circuit
    circuits: JSON.parse(JSON.stringify(circuits))
  },
```
### circuits.config.json
circuits configuation is separated from hardhat.config.ts for **autogenerated** purposes (see next section)
```
[
  {
    "name": "CustomCircuit",
    "protocol": "groth16",
    "circuit": "CustomCircuit/circuit.circom",
    "input": "CustomCircuit/input.json",
    "wasm": "CustomCircuit/out/circuit.wasm",
    "zkey": "CustomCircuit/out/CustomCircuit.zkey",
    "vkey": "CustomCircuit/out/CustomCircuit.vkey",
    "r1cs": "CustomCircuit/out/CustomCircuit.r1cs",
    "beacon": "0102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f"
  }
]
```
## Author

- Sunil Kumar
